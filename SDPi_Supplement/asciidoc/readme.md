# Asciidoc conventions

The following sections specify conventions for the writing of Asciidoc markup.
It makes use of [Backus-Naur forms](https://en.wikipedia.org/wiki/Backus%E2%80%93Naur_form), which may include
[Regular expressions](https://en.wikipedia.org/wiki/Regular_expression) (signified by enclosing slashes) to describe 
grammars for acceptable characters of symbols.

## Image paths

Images are stored in the `images` sub-folder including any diagrams generated by the Asciidoc Diagram plugin.

## Listing paths

Code listings are stored in the `listings` sub-folder.

## Plant UML diagrams

PlantUML diagram sources are stored in the `plantuml` sub-folder.

- A PlantUML diagram source shall be included by using the `include` directive (rather than inline)
- A PlantUML diagram source shall contain `skinparam dpi 300` for appropriate high-resolution rendering
- If no custom color palette is applied on a PlantUML diagram, the PlantUML diagram's source shall contain 
  `skinparam monochrome true` 
  for monochrome rendering

### Example

````asciidoc
.Diagram title
[[vol2-figure-xyz]]
[plantuml, target=puml-vol2-figure-xyz, format=svg, reftext='{figure-caption} {counter:refnum}']
....
include::../plantuml/vol2-figure-xyz.puml[]
....
````

## PlantUML target file names

PlantUML diagram target names shall start with `puml` to easily identify any generated Plant UML artifacts in the
`images` folder.

```
Name ::= /^[a-z0-9-]+$/
PlantUmlTarget = 'puml-' Name
```

### Example

The listing below generates a PlantUML SVG file in the `images` folder named `puml-vol2-figure-xyz.svg`.

````asciidoc
.Diagram title
[[vol2-figure-xyz]]
[plantuml, target=puml-vol2-figure-xyz, format=svg, reftext='{figure-caption} {counter:refnum}']
....
include::../plantuml/vol2-figure-xyz.puml[]
....
````

## Cross-references

Cross-references within the supplement shall follow the pattern below in order to avoid naming conflicts.

```
Volume = 'vol1' | 'vol2' | 'vol3' 
ReferenceType ::= 'clause' | 'listing' | 'figure' | 'table'
Name ::= /^[a-z0-9-]+$/
CrossReference ::= [ Volume ] '-' ReferenceType '-' Name
```

### Example

````asciidoc
[#vol2-clause-transactions]
== Transactions

Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore 
magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd 
gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.
````