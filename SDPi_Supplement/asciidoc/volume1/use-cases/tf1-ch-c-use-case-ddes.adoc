// = Use Case Feature: Device Data to Enterprise Systems (DDES)

[sdpi_offset=5]
=== Use Case Feature {var_use_case_id}: Device Data to Enterprise Systems (DDES)

==== Narrative

Mercy Hospital is in the middle of a new EHR (Epic, Cerner, etc.) rollout.  Joe Furst is responsible for integrating data from their ICU devices (patient monitors, ventilators, infusion devices, etc.) with the new EHR.  Once they are done, the data from the devices will be reviewed/validated by the ICU clinicians and then automatically entered into the patientâ€™s clinical record.

==== Technical View

.Device Data to Enterprise Systems (DDES) -- Technical View

image::../images/vol1-diagram-use-case-ddes-tech-view.svg[]

==== Technical Pre-Conditions

*Given* All devices communicate using a common <<acronym_md_lan>> protocol

*And* There is at least one Data Gateway (DGW) Service

*And* All devices report either a device label and/or location

*And* A DGW Service is associated with a specific set of device labels, and/or location(s) (i.e. devices in scope).

==== Scenarios

===== Scenario: DDES {var_use_case_id}.1 - New in scope device is connected to network with MGW service

*Given* The DGW Service has detected a new in scope device

*When* The DGW Service is operational

*Then* The DGW Service will connect to the device and export data to the EHR using the HL7 v2 based IHE DEV DOR actor of the DEV DEC profile

#TODO:  SHOULD REFERENCE THE DOR ACTOR FROM THE PROFILES AS INDICATED BUT WHERE AND HOW AND WHERE HERE DO WE REFERENCE THE ACRONYMS THAT ARE ALREADY DEFINED IN THE TF-0 APPENDIX A BUT NOT IN OUR GLOSSARY AND NOT WITH ASCIIDOC METADATA - SYNC WITH TF-2 APPENDIX B GATEWAY CONTENT#

===== Scenario: DDES {var_use_case_id}.2 - Data Gateway Service is connected to the EHR

*Given* The DGW Service is exporting data to the EHR

*Then* The DGW Service will comply with all IHE DEV DEC profile DOR actor functional and test requirements.

===== Scenario: DDES {var_use_case_id}.3 - Data Gateway Service has a failure

*Given* The DGW Service was connected to in scope devices and to an Enterprise system and fails

*Then* The DGW Service will backfill its data store and then backfill to the EHR when it recovers from its failure

===== Scenario: DDES {var_use_case_id}.4 - Data Gateway Service connection to the Enterprise System fails

*Given* The Enterprise System stops receiving data from the DGW Service

*When* There is a communications failure between the DGW Service and the Enterprise System

*Then* The DGW Service will backfill missed data to the Enterprise System when communications resumes



