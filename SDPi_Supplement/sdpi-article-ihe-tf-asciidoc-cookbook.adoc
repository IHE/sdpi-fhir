= IHE TF AsciiDoc Cookbook
0.1, 2022.09.06: AsciiDoc article / repo wiki
:toc: right
:icons: font

WARNING: This is a straw-man article. Content hackers welcomed!

== FROM ORIGINAL ASCIIDOC/README.MD

## Asciidoc conventions ...

The following sections specify conventions for the writing of Asciidoc markup.
It makes use of [Backus-Naur forms](https://en.wikipedia.org/wiki/Backus%E2%80%93Naur_form), which may include
[Regular expressions](https://en.wikipedia.org/wiki/Regular_expression) (signified by enclosing slashes) to describe
grammars for acceptable characters of symbols.

## Image paths

Images are stored in the `images` sub-folder including any diagrams generated by the Asciidoc Diagram plugin.

## Listing paths

Code listings are stored in the `listings` sub-folder.

## Plant UML diagrams

PlantUML diagram sources are stored in the `plantuml` sub-folder.

- A PlantUML diagram source shall be included by using the `include` directive (rather than inline)
- A PlantUML diagram source shall contain `skinparam dpi 300` for appropriate high-resolution rendering
- If no custom color palette is applied on a PlantUML diagram, the PlantUML diagram's source shall contain
`skinparam monochrome true`
for monochrome rendering

### Example

````asciidoc
.Diagram title
[[vol2-figure-xyz]]
[plantuml, target=puml-vol2-figure-xyz, format=svg, reftext='{figure-caption} {counter:refnum}']
....
include::../plantuml/vol2-figure-xyz.puml[]
....
````

## PlantUML target file names

PlantUML diagram target names shall start with `puml` to easily identify any generated Plant UML artifacts in the
`images` folder.

```
Name ::= /^[a-z0-9-]+$/
PlantUmlTarget = 'puml-' Name
```

### Example

The listing below generates a PlantUML SVG file in the `images` folder named `puml-vol2-figure-xyz.svg`.

````asciidoc
.Diagram title
[[vol2-figure-xyz]]
[plantuml, target=puml-vol2-figure-xyz, format=svg, reftext='{figure-caption} {counter:refnum}']
....
include::../plantuml/vol2-figure-xyz.puml[]
....
````

## Cross-references

Cross-references within the supplement shall follow the pattern below in order to avoid naming conflicts.

```
Volume = 'vol1' | 'vol2' | 'vol3'
ReferenceType ::= 'clause' | 'listing' | 'figure' | 'table'
Name ::= /^[a-z0-9-]+$/
CrossReference ::= [ Volume ] '-' ReferenceType '-' Name
```

### Example

````asciidoc
[#vol2-clause-transactions]
== Transactions

Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore
magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd
gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.
````

== NEW STUFF

Include:

* Overview (article purpose & content)

* Section Numbering & Naming Conventions
Much of this is specified in the IHE template, but
see "depth" and discontinuous section numbering issues

Capture:  indicate section depth + offset using something like ...

[#the-id,sdpi_num_offset=10] and

[#the-id,sdpi_num_level=+1]  depth indicator

Also factor in Figure and Table numbering:  section number + "-1" | "-2" ...

* Non-section Number Based / cross-doc References



* IHE TF UML Model

Include something that shows the interrelationships between blocks of content.

IMPORTANT: TBD - __Need to determine how to formalize these kinds of UML models; drawn in "Magicdraw", to PNG, to XMl rep of some sort (collapsable inclusion?), used for this doc + for SST database extraction / processing __

* Mapping from UML to AsciiDoc Block Content

** All special blocks should include a UML model for their content and be represented in the general TF UML model
** Classes represent blocks (including referenced classes)
** Class data elements represent block content
** Contained classes represent nested block content that can have cardinality
** ...

* Reference Conventions (basic syntax, conventions)

* Block basics
* Block naming conventions
* Block types

** IHE TF Elements (with URI identifiers) - see UML Models

*** Profile + Profile Option
*** Actor + Actor Option + TF-0 Summary
*** Transaction (TF-0 summary + TF-2 detail)
*** Issues / Open & Closed (w/ ToI links & github Issue links)
*** TF-0 Glossary - Term of Art
*** BICEPS specification (e.g., XML for a specialization OR for a )
*** ...

** RI "link" blocks  (note: separate article proposed ... needed?)
** Requirement blocks
** SES blocks + subsections
** Use Case (Gherkin structured + General Appx. C & profile specific) - see UML model

NOTE:  Include UML model for each block type (per above)

* Block "tagging regions" to omit all from production
** See https://docs.asciidoctor.org/asciidoc/latest/directives/include-tagged-regions/#tagging-regions[AsciiDoc "Tagging regions" article] for conditional logic that can be used to include source content that is not passed through to the printed document
** See https://docs.asciidoctor.org/asciidoc/latest/blocks/delimited/#nesting[AsciiDoc "Nesting blocks" article]

NOTE:  For quick links and examples for AsciiDoc constructs that are used in the SDPi Supplement, see the wiki article:  https://github.com/IHE/sdpi-fhir/wiki/SDPi-Editors-AsciiDoc-Cheat-Sheet.asciidoc[_SDPi Editors' AsciiDoc Cheat Sheet_]

{empty} +

