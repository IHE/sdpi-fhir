= IHE TF AsciiDoc Cookbook
0.1, 2022.09.06: AsciiDoc article / repo wiki
:doctype: book
:xrefstyle: short
:toc-title: Contents
:toc: left
<<<<<<< HEAD
:toclevels: 3
=======
:toclevels: 2
>>>>>>> 696f5c10d3bfea5018f9c64464d27e9f148580b5
:!sectnums:
:icons: font
:imagesoutdir: images/
:imagesdir: images/

<<<<<<< HEAD
WARNING: This is a straw-man article - actively under development!  Add content requests to section <<Topics Parking Lot>>.
=======
WARNING: This is a straw-man article. Content hackers welcomed!  Add content requests to section <<Topics Parking Lot>>.
>>>>>>> 696f5c10d3bfea5018f9c64464d27e9f148580b5

== Cookbook Overview
This article provides a *_handy_* reference place for the conventions and templates that editors will apply in creating content for the SDPi specification.  It is organized so as to help with specific editorial tasks (e.g., references, images, tables, metadata, etc.).

Related articles that support the information below include:

* https://github.com/IHE/sdpi-fhir/blob/50ace3692b9299cdfcea434501df87b192f5220c/SDPi_Supplement/articles/sdpi-article-asciidoc-cheat-sheet.adoc[AsciiDoc Cheat Sheet]
* https://github.com/IHE/sdpi-fhir/wiki/SDPi-File-Organization-Scheme[SDPi File Organization Scheme]

== Document Conventions
<<<<<<< HEAD
The items in this section apply to either the document overall or to entire files.
=======
ADD:  Copy and past document header
ADD:  Unique attributes or other directives used
ADD:  Multi-File / Multi-Doc Support conventions

== IHE TF Elements Conventions

==

== #FROM ORIGINAL ASCIIDOC/README.MD#
>>>>>>> 696f5c10d3bfea5018f9c64464d27e9f148580b5

=== HTML -- Continuous Build
In order to support a "continuous build" process -- namely, being able to frequently render to HTML and ensure that the process is working -- the steps below should be followed.

NOTE:  This See the general tooling configuration article on the wiki for more information:  https://github.com/IHE/sdpi-fhir/wiki/Crafting-AsciiDoc-based-SDPi-Supplement-Content#authoring-using-intellij-platform[Authoring Using IntelliJ Platform]

==== IntelliJ Configuration & Processes

ROUGH NOTES FROM DEMO SESSION 2022.09.14 ...

. (Optional) set up SDPi_Supplement + asciidoc-conerter as IntelliJ Projects - to make work in those directories easier
... <select directory ... File::New::Project From Existing Sources ..
. Ensure Gradle is installed!
.

==== Publishing the SDPi Supplement to HTML
ADD:  How to run the converter to see the actual published supplement

=== Multi-File / Multi-Doc Support
ADD:  General discussion and conventions and support for the AsciiDoc multi-file approach
ADD:  Tooling used + configuration

=== Document Header
ADD:  Template for what should be at the top of each of the .adoc files

=== Attributes (Document Level) for SDPi
ADD:  Specific attributes (document level) that should be included / considered for each .adoc file

== AsciiDoc Content Conventions

The following subsections specify conventions for the writing of Asciidoc markup.
It makes use of https://en.wikipedia.org/wiki/Backus%E2%80%93Naur_form[Backus-Naur forms], which may include
https://en.wikipedia.org/wiki/Regular_expression[Regular expressions] (signified by enclosing slashes) to describe
grammars for acceptable characters of symbols.

=== Identifier naming

Asciidoc leverages identifiers for cross-referencing artifacts in Asciidoc markup.
The following rule specifies is a general naming convention for identifiers that is used throughout this section:

[source]
----
Name ::= /^[a-z0-9_]+$/
----

Name:: Custom name that contains small letters, digits and underscores only.

==== Blocks

Block Identifiers shall be made up from the following rules:

[source]
----
Volume = 'vol0' | vol1' | 'vol2' | 'vol3'
ReferenceType ::= 'clause' | 'appendix' | 'listing' | 'figure' | 'table'

BlockIdentifier ::= Volume '_' ReferenceType '_' Name
----

Volume:: Target volume.
ReferenceType:: The referenced block type.

.Example of including a clause name
====
[source,asciidoc]
----
[#vol2_clause_transactions]
== Transactions

Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore
magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd
gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.
----
====

==== Variables

Variables can be used to avoid repeating names or URIs in the Asciidoc source code. Variables shall be made up from the following rules:

[source]
----
VariableType ::= 'uri'

VariableName ::= 'var_' + [ VariableType + '_' ] + Name
----

VariableType:: Type of the variable, currently URIs/URLs are to be specifically designated.

==== Definitions

Definition Names are just arbitrary character sequences according to the following rule:

[source]
----
DefinitionName ::= Name
----

==== Actors

Actor Names are definition names with a specific prefix:

[source]
----
ActorName ::= 'actor_' + Name
----

=== Image paths

Images are stored in the `images` sub-folder including any diagrams generated by the Asciidoc Diagram plugin.

=== Listing paths

Code listings are stored in the `listings` sub-folder.

=== Plant UML diagrams

PlantUML diagram sources are stored in the `plantuml` sub-folder.

- A PlantUML diagram source shall be included by using the `include` directive (rather than inline)
- A PlantUML diagram source shall contain `skinparam dpi 300` for appropriate high-resolution rendering
- If no custom color palette is applied on a PlantUML diagram, the PlantUML diagram's source shall contain `skinparam monochrome true` for monochrome rendering

PlantUML diagram target names shall start with `puml` to easily identify any generated Plant UML artifacts in the
`images` folder.

[source]
----
PlantUmlTarget = 'puml-' Name
----

.Example of including a PlantUML diagram. Note the leading `puml-` at the target option.
====
[source,asciidoc]
----
.Diagram title
[[vol2_figure_xyz]]
[plantuml, target=puml-vol2-figure-xyz, format=svg, reftext='{figure-caption} {counter:refnum}']
....
include::../plantuml/vol2-figure-xyz.puml[]
....
----
====

== IHE TF Elements Conventions
The SDPi supplement conforms to the IHE Technical Framework (TF) elements and template.  A general UML model of the TF is provided in the sections below, along with how that model, including element metadata and relationships, is capured in AsciiDoc content.

===  IHE TF General Model
ADD: Basic UML model of IHE TF elements that will then be reflected (sooner or later) in the supplement

== Requirements Interoperability Support
In order to achieve "requirements Interoperability" -- where each requirement is matched with the one or more capabilities for its fulfilment -- each requirement should be marked with appropriate metadata + linkages to one or more capabilities.  The following sections provide AsciiDoc

=== RI General Model
ADD:  UML Requirements Interoperability Model
ADD:  Example of how the metadata is recorded

=== Requirement Definition
ADD: specification and examples for requirements - including, requirement types and metadata
ADD: specification of URI for requirements ... naming conventions

=== Requirement-to-Capability Linkage
ADD:  specification of how to link a requirement to one or more capabilities (that fulfil the requirement)

=== Requirement Traceability & Coverage
ADD:  Description on how RI might be used to determine coverage (including percentage?) and traceability


== Topics Parking Lot

Include:

Add:  Continuous Build process documentation ... for multi-file / multi-page AsciiDoc sources
* Section Numbering & Naming Conventions
Much of this is specified in the IHE template, but
see "depth" and discontinuous section numbering issues

Capture:  indicate section depth + offset using something like ...

[#the_id,sdpi_num_offset=10] and

[#the_id,sdpi_num_level=+1]  depth indicator

Also factor in Figure and Table numbering:  section number + "-1" | "-2" ...

* Non-section Number Based / cross-doc References



* IHE TF UML Model

Include something that shows the interrelationships between blocks of content.

IMPORTANT: TBD - __Need to determine how to formalize these kinds of UML models; drawn in "Magicdraw", to PNG, to XMl rep of some sort (collapsable inclusion?), used for this doc + for SST database extraction / processing __

* Mapping from UML to AsciiDoc Block Content

** All special blocks should include a UML model for their content and be represented in the general TF UML model
** Classes represent blocks (including referenced classes)
** Class data elements represent block content
** Contained classes represent nested block content that can have cardinality
** ...

* Reference Conventions (basic syntax, conventions)

* Block basics
* Block naming conventions
* Block types

** IHE TF Elements (with URI identifiers) - see UML Models

*** Profile + Profile Option
*** Actor + Actor Option + TF-0 Summary
*** Transaction (TF-0 summary + TF-2 detail)
*** Issues / Open & Closed (w/ ToI links & github Issue links)
*** TF-0 Glossary - Term of Art
*** BICEPS specification (e.g., XML for a specialization OR for a )
*** ...

** RI "link" blocks  (note: separate article proposed ... needed?)
** Requirement blocks
** SES blocks + subsections
** Use Case (Gherkin structured + General Appx. C & profile specific) - see UML model

NOTE:  Include UML model for each block type (per above)

* Block "tagging regions" to omit all from production
** See https://docs.asciidoctor.org/asciidoc/latest/directives/include-tagged-regions/#tagging-regions[AsciiDoc "Tagging regions" article] for conditional logic that can be used to include source content that is not passed through to the printed document
** See https://docs.asciidoctor.org/asciidoc/latest/blocks/delimited/#nesting[AsciiDoc "Nesting blocks" article]

NOTE:  For quick links and examples for AsciiDoc constructs that are used in the SDPi Supplement, see the wiki article:  https://github.com/IHE/sdpi-fhir/wiki/SDPi-Editors-AsciiDoc-Cheat-Sheet.asciidoc[_SDPi Editors' AsciiDoc Cheat Sheet_]

{empty} +

